<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Conversations</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
</head>

<body class="relative overflow-hidden">
    <!-- Drop Zone Overlay -->
    <div id="dropOverlay" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center text-white text-2xl font-bold z-[100] pointer-events-none hidden">
        <span>Drop .zip file anywhere to upload</span>
    </div>

    <!-- Top Navigation -->
    <nav class="bg-gray-800 text-white p-4 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center w-1/3">
            <a href="/" class="text-xl font-bold">Chat History</a>
            <!-- Upload Button -->
            <label class="cursor-pointer ml-4 group" title="Upload conversations.zip">
                <span class="material-symbols-outlined align-middle group-hover:text-blue-400">upload_file</span>
                <input type="file" id="zipInput" accept=".zip" class="hidden" />
            </label>
            <!-- Upload Status -->
            <span id="uploadStatus" class="ml-2 text-sm text-gray-400"></span>
        </div>

        <!-- Search -->
        <div class="w-1/3 relative">
            <input type="text" id="searchInput" placeholder="Search..." class="w-full p-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span id="clearSearch" class="absolute right-2 top-2 cursor-pointer material-symbols-outlined text-gray-400 hover:text-white">close</span>
        </div>

        <!-- Activity Link -->
        <div class="w-1/3 flex justify-end">
            <a href="/hourly.html" class="text-white hover:text-blue-400 flex items-center ml-4" title="Hourly Activity (Last 24h)">
                <span class="material-symbols-outlined mr-1">hourglass_top</span>
                Hourly
            </a>
        </div>
    </nav>

    <!-- Main content -->
    <div class="flex h-screen" style="height: calc(100vh - 64px);">
        <!-- Sidebar -->
        <div class="w-1/3 p-2 bg-gray-200 overflow-y-auto" id="sidebar">
    
            <!-- Sticky filter section -->
            <div class="sticky top-0 z-10 bg-gray-200">
                <div class="flex justify-between items-center mb-4">
                    <div class="p-2 w-full">
                        <select class="mt-1 p-2 w-full rounded-md" id="groupFilter">
                            <option value="">Everything</option>
                            <option value="*">* Favorites *</option>
                            <!-- Group options will be populated dynamically -->
                        </select>
                    </div>
                    <div class="p-2 w-full">
                        <input class="mt-1 p-2 w-full rounded-md" id="textFilter" placeholder="Quick filter..." type="text" />
                    </div>
                </div>
            </div>
        
            <div id="sidebar-conversations" style="margin-top: -1rem">
                <!-- Conversations -->
            </div>
        </div>
        

        <!-- Main content wrapper -->
        <div class="w-2/3 overflow-y-auto" id="main-content-wrapper">
            <!-- Central content -->
            <div class="p-4 mx-auto overflow-hidden" id="main-content" style="max-width: 730px;">
                <!-- Messages -->
                <h1 class="pt-10 pb-2 text-center text-xl">Chat activity</h1>
                <div id="activity-graph"></div>

                <h1 class="pt-10 pb-4 text-center text-xl">Messages daily</h1>
                <canvas id="activity-bar-chart"></canvas>

                <!-- <h1 class="pt-8 pb-4 text-center text-xl">Statistics</h1> -->
                <div class="w-1/2 mx-auto pt-6" id="chat-statistics"></div>

                <div class="pt-10 text-center">
                    <button class="bg-transparent hover:bg-blue-500 text-blue-500 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"
                        onclick="loadAICostStats()">
                        See OpenAI costs statistics
                    </button>
                </div>
            </div>
        </div>
    </div>
    <link href="style.css" rel="stylesheet" />
    <script src="script.js"></script>
    <script src="activity.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
</body>

</html>